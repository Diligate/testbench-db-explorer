{"ast":null,"code":"var _jsxFileName = \"/home/user5/Desktop/Imbus_Intern/client/src/pages/client/tableDetail/TableGraph.js\",\n  _s = $RefreshSig$();\n// TableGraph.js\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport ForceGraph2D from \"react-force-graph-2d\";\nimport { useNavigate } from \"react-router-dom\";\nimport RelationsPk from \"./relationsPk\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TableGraph({\n  graph,\n  tableName,\n  show,\n  setShow,\n  attributes,\n  relations,\n  table\n}) {\n  _s();\n  useEffect(() => {\n    fetch(\"http://localhost:5500/tables/one/\" + name).then(res => res.json()).then(data => {\n      setTable(data);\n\n      // fetch attributes\n      fetch(\"http://localhost:5500/attributes/table/\" + data.id).then(res => res.json()).then(data => setAttributes(data));\n\n      // fetch relations (pk/fk)\n      fetch(\"http://localhost:5500/attributes/name/\" + data.name).then(res => res.json()).then(data => setRelationsP(data));\n\n      // fetch graph\n      fetch(\"http://localhost:5500/tables/graph/view\").then(res => res.json()).then(g => {\n        const node = g.nodes.find(n => n.name === name);\n        if (!node) return;\n        const neighbors = new Set([node.id]);\n        g.links.forEach(l => {\n          if (l.source === node.id) neighbors.add(l.target);\n          if (l.target === node.id) neighbors.add(l.source);\n        });\n        const nodes = g.nodes.filter(n => neighbors.has(n.id));\n        const links = g.links.filter(l => neighbors.has(l.source) && neighbors.has(l.target));\n        setLocalGraph({\n          nodes,\n          links\n        });\n      });\n    }).catch(() => {\n      console.error(\"Could not load table data\");\n    });\n  }, [name]);\n  const fgRef = useRef();\n  const navigate = useNavigate();\n  const [tooltip, setTooltip] = useState({\n    visible: false,\n    x: 0,\n    y: 0,\n    text: \"\"\n  });\n\n  // Track mouse position for tooltip placement\n  useEffect(() => {\n    const handleMove = e => {\n      setTooltip(prev => ({\n        ...prev,\n        x: e.clientX,\n        y: e.clientY\n      }));\n    };\n    window.addEventListener(\"mousemove\", handleMove);\n    return () => window.removeEventListener(\"mousemove\", handleMove);\n  }, []);\n\n  // Filter: only main table + directly connected nodes, links only to/from main table\n  const filtered = useMemo(() => {\n    if (!(graph !== null && graph !== void 0 && graph.nodes) || !(graph !== null && graph !== void 0 && graph.links)) return {\n      nodes: [],\n      links: []\n    };\n    const main = graph.nodes.find(n => n.name === tableName);\n    if (!main) return {\n      nodes: [],\n      links: []\n    };\n    const neighbors = new Set([main.id]);\n    const links = graph.links.filter(l => {\n      const src = typeof l.source === \"object\" ? l.source.id : l.source;\n      const tgt = typeof l.target === \"object\" ? l.target.id : l.target;\n      if (src === main.id || tgt === main.id) {\n        neighbors.add(src);\n        neighbors.add(tgt);\n        return true;\n      }\n      return false;\n    });\n    const nodes = graph.nodes.filter(n => neighbors.has(n.id));\n    return {\n      nodes,\n      links\n    };\n  }, [graph, tableName]);\n\n  // Setup forces for spacing\n  useEffect(() => {\n    if (fgRef.current) {\n      const fg = fgRef.current;\n      fg.d3Force(\"charge\").strength(-400); // push nodes apart\n      fg.d3Force(\"link\").distance(200); // spread links further\n    }\n  }, [filtered]);\n\n  // Zoom controls\n  const handleZoomIn = () => {\n    if (fgRef.current) {\n      const zoom = fgRef.current.zoom();\n      fgRef.current.zoom(zoom * 1.2, 400);\n    }\n  };\n  const handleZoomOut = () => {\n    if (fgRef.current) {\n      const zoom = fgRef.current.zoom();\n      fgRef.current.zoom(zoom / 1.2, 400);\n    }\n  };\n  const handleZoomToFit = () => {\n    if (fgRef.current) {\n      fgRef.current.zoomToFit(400, 100);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-full bg-white rounded-lg shadow relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center mx-auto mb-5 \",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"px-6 text-xl italic\",\n        children: \"Graph view\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"ShowGraph\",\n        className: \"relative w-16 h-8 cursor-pointer\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"ShowGraph\",\n          className: \"sr-only peer\",\n          onChange: () => setShow(prev => !prev),\n          checked: show\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute inset-0 bg-orange-400 rounded-full transition peer-checked:bg-[#3e9688]\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute inset-0 w-6 h-6 m-1 bg-white rounded-full transition peer-checked:translate-x-8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), show && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full h-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-3 right-3 flex flex-col gap-2 z-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomIn,\n          className: \"px-2 py-1 bg-gray-700 text-white rounded shadow\",\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomOut,\n          className: \"px-2 py-1 bg-gray-700 text-white rounded shadow\",\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomToFit,\n          className: \"px-2 py-1 bg-gray-700 text-white rounded shadow text-xs\",\n          children: \"Fit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this), tooltip.visible && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bg-white text-gray-800 text-xs px-3 py-2 rounded-lg shadow-lg border border-[#3e9688] pointer-events-none z-50\",\n        style: {\n          left: tooltip.x + 12,\n          top: tooltip.y + 12\n        },\n        children: tooltip.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ForceGraph2D, {\n        ref: fgRef,\n        graphData: filtered,\n        nodeId: \"id\",\n        nodeLabel: n => {\n          var _n$pkColumns;\n          return `${n.name}\\nPKs: ${((_n$pkColumns = n.pkColumns) === null || _n$pkColumns === void 0 ? void 0 : _n$pkColumns.join(\", \")) || \"(none)\"}`;\n        },\n        linkDirectionalArrowLength: 6,\n        linkDirectionalArrowRelPos: 1,\n        linkCurvature: 0.25,\n        nodeAutoColorBy: \"group\",\n        onNodeClick: node => navigate(`/table/${node.name}`),\n        enableZoomPanInteraction: false // disable scroll zoom\n        ,\n\n        onLinkHover: link => {\n          if (link) {\n            const relation = relations.find(r => r.fk_table === link.target && r.pk_table === link.source);\n            if (relation) {\n              var _attributes$find, _attributes$find2;\n              const pkAttr = ((_attributes$find = attributes.find(a => a.id === relation.pk_attr)) === null || _attributes$find === void 0 ? void 0 : _attributes$find.name) || \"N/A\";\n              const fkAttr = ((_attributes$find2 = attributes.find(a => a.id === relation.fk_attr)) === null || _attributes$find2 === void 0 ? void 0 : _attributes$find2.name) || \"N/A\";\n              setTooltip({\n                x: link.source.x,\n                y: link.source.y,\n                text: `PK: ${pkAttr} â†’ FK: ${fkAttr}`\n              });\n            }\n          } else {\n            setTooltip(null);\n          }\n        },\n        linkColor: link => {\n          const src = typeof link.source === \"object\" ? link.source.id : link.source;\n          const tgt = typeof link.target === \"object\" ? link.target.id : link.target;\n          return tgt === tableName ? \"#16a34a\" : \"#f59e0b\"; // green incoming, orange outgoing\n        },\n        linkWidth: 2,\n        nodeCanvasObject: (node, ctx, globalScale) => {\n          const label = node.name;\n          const fontSize = 14 / Math.max(0.5, globalScale);\n          ctx.beginPath();\n          ctx.arc(node.x, node.y, node.name === tableName ? 12 : 8, 0, 2 * Math.PI, false);\n          ctx.fillStyle = node.name === tableName ? \"#f97316\" : node.color || \"#ccc\";\n          ctx.fill();\n          ctx.strokeStyle = \"#333\";\n          ctx.lineWidth = 2;\n          ctx.stroke();\n          ctx.font = `${fontSize}px Sans-Serif`;\n          ctx.textAlign = \"center\";\n          ctx.textBaseline = \"top\";\n          ctx.fillStyle = \"#111\";\n          ctx.fillText(label, node.x, node.y + 14);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n_s(TableGraph, \"ZCZQnL4egWfRJ3BEcbkGFi408wY=\", false, function () {\n  return [useNavigate];\n});\n_c = TableGraph;\nvar _c;\n$RefreshReg$(_c, \"TableGraph\");","map":{"version":3,"names":["useEffect","useMemo","useRef","useState","ForceGraph2D","useNavigate","RelationsPk","jsxDEV","_jsxDEV","TableGraph","graph","tableName","show","setShow","attributes","relations","table","_s","fetch","name","then","res","json","data","setTable","id","setAttributes","setRelationsP","g","node","nodes","find","n","neighbors","Set","links","forEach","l","source","add","target","filter","has","setLocalGraph","catch","console","error","fgRef","navigate","tooltip","setTooltip","visible","x","y","text","handleMove","e","prev","clientX","clientY","window","addEventListener","removeEventListener","filtered","main","src","tgt","current","fg","d3Force","strength","distance","handleZoomIn","zoom","handleZoomOut","handleZoomToFit","zoomToFit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","onChange","checked","onClick","style","left","top","ref","graphData","nodeId","nodeLabel","_n$pkColumns","pkColumns","join","linkDirectionalArrowLength","linkDirectionalArrowRelPos","linkCurvature","nodeAutoColorBy","onNodeClick","enableZoomPanInteraction","onLinkHover","link","relation","r","fk_table","pk_table","_attributes$find","_attributes$find2","pkAttr","a","pk_attr","fkAttr","fk_attr","linkColor","linkWidth","nodeCanvasObject","ctx","globalScale","label","fontSize","Math","max","beginPath","arc","PI","fillStyle","color","fill","strokeStyle","lineWidth","stroke","font","textAlign","textBaseline","fillText","_c","$RefreshReg$"],"sources":["/home/user5/Desktop/Imbus_Intern/client/src/pages/client/tableDetail/TableGraph.js"],"sourcesContent":["// TableGraph.js\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport ForceGraph2D from \"react-force-graph-2d\";\nimport { useNavigate } from \"react-router-dom\";\nimport RelationsPk from \"./relationsPk\";\nexport default function TableGraph({ graph, tableName, show, setShow, attributes, relations, table }) {\n\n   useEffect(() => {\n    fetch(\"http://localhost:5500/tables/one/\" + name)\n      .then((res) => res.json())\n      .then((data) => {\n        setTable(data);\n\n        // fetch attributes\n        fetch(\"http://localhost:5500/attributes/table/\" + data.id)\n          .then((res) => res.json())\n          .then((data) => setAttributes(data));\n\n        // fetch relations (pk/fk)\n        fetch(\"http://localhost:5500/attributes/name/\" + data.name)\n          .then((res) => res.json())\n          .then((data) => setRelationsP(data));\n\n        // fetch graph\n        fetch(\"http://localhost:5500/tables/graph/view\")\n          .then((res) => res.json())\n          .then((g) => {\n            const node = g.nodes.find((n) => n.name === name);\n            if (!node) return;\n            const neighbors = new Set([node.id]);\n            g.links.forEach((l) => {\n              if (l.source === node.id) neighbors.add(l.target);\n              if (l.target === node.id) neighbors.add(l.source);\n            });\n            const nodes = g.nodes.filter((n) => neighbors.has(n.id));\n            const links = g.links.filter(\n              (l) => neighbors.has(l.source) && neighbors.has(l.target)\n            );\n            setLocalGraph({ nodes, links });\n          });\n      })\n      .catch(() => {\n        console.error(\"Could not load table data\");\n      });\n  }, [name]);\n\n  const fgRef = useRef();\n  const navigate = useNavigate();\n  const [tooltip, setTooltip] = useState({ visible: false, x: 0, y: 0, text: \"\" });\n\n  // Track mouse position for tooltip placement\n  useEffect(() => {\n    const handleMove = (e) => {\n      setTooltip((prev) => ({ ...prev, x: e.clientX, y: e.clientY }));\n    };\n    window.addEventListener(\"mousemove\", handleMove);\n    return () => window.removeEventListener(\"mousemove\", handleMove);\n  }, []);\n\n  // Filter: only main table + directly connected nodes, links only to/from main table\n  const filtered = useMemo(() => {\n    if (!graph?.nodes || !graph?.links) return { nodes: [], links: [] };\n\n    const main = graph.nodes.find((n) => n.name === tableName);\n    if (!main) return { nodes: [], links: [] };\n\n    const neighbors = new Set([main.id]);\n    const links = graph.links.filter((l) => {\n      const src = typeof l.source === \"object\" ? l.source.id : l.source;\n      const tgt = typeof l.target === \"object\" ? l.target.id : l.target;\n      if (src === main.id || tgt === main.id) {\n        neighbors.add(src);\n        neighbors.add(tgt);\n        return true;\n      }\n      return false;\n    });\n\n    const nodes = graph.nodes.filter((n) => neighbors.has(n.id));\n    return { nodes, links };\n  }, [graph, tableName]);\n\n  // Setup forces for spacing\n  useEffect(() => {\n    if (fgRef.current) {\n      const fg = fgRef.current;\n      fg.d3Force(\"charge\").strength(-400); // push nodes apart\n      fg.d3Force(\"link\").distance(200); // spread links further\n    }\n  }, [filtered]);\n\n  // Zoom controls\n  const handleZoomIn = () => {\n    if (fgRef.current) {\n      const zoom = fgRef.current.zoom();\n      fgRef.current.zoom(zoom * 1.2, 400);\n    }\n  };\n  const handleZoomOut = () => {\n    if (fgRef.current) {\n      const zoom = fgRef.current.zoom();\n      fgRef.current.zoom(zoom / 1.2, 400);\n    }\n  };\n  const handleZoomToFit = () => {\n    if (fgRef.current) {\n      fgRef.current.zoomToFit(400, 100);\n    }\n  };\n\n  return (\n    <div className=\"w-full h-full bg-white rounded-lg shadow relative\">\n      <div className=\"flex justify-center items-center mx-auto mb-5 \">\n        <h3 className=\"px-6 text-xl italic\">Graph view</h3>\n        <label htmlFor=\"ShowGraph\" className=\"relative w-16 h-8 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            id=\"ShowGraph\"\n            className=\"sr-only peer\"\n            onChange={() => setShow((prev) => !prev)}\n            checked={show}\n          />\n          <span className=\"absolute inset-0 bg-orange-400 rounded-full transition peer-checked:bg-[#3e9688]\" />\n          <span className=\"absolute inset-0 w-6 h-6 m-1 bg-white rounded-full transition peer-checked:translate-x-8\" />\n        </label>\n      </div>\n\n      {show && (\n        <div className=\"relative w-full h-full\">\n          {/* Zoom controls */}\n          <div className=\"absolute top-3 right-3 flex flex-col gap-2 z-10\">\n            <button\n              onClick={handleZoomIn}\n              className=\"px-2 py-1 bg-gray-700 text-white rounded shadow\"\n            >\n              +\n            </button>\n            <button\n              onClick={handleZoomOut}\n              className=\"px-2 py-1 bg-gray-700 text-white rounded shadow\"\n            >\n              -\n            </button>\n            <button\n              onClick={handleZoomToFit}\n              className=\"px-2 py-1 bg-gray-700 text-white rounded shadow text-xs\"\n            >\n              Fit\n            </button>\n          </div>\n\n          {/* Floating tooltip */}\n          {tooltip.visible && (\n            <div\n              className=\"absolute bg-white text-gray-800 text-xs px-3 py-2 rounded-lg shadow-lg border border-[#3e9688] pointer-events-none z-50\"\n              style={{ left: tooltip.x + 12, top: tooltip.y + 12 }}\n            >\n              {tooltip.text}\n            </div>\n          )}\n\n          <ForceGraph2D\n            ref={fgRef}\n            graphData={filtered}\n            nodeId=\"id\"\n            nodeLabel={(n) =>\n              `${n.name}\\nPKs: ${n.pkColumns?.join(\", \") || \"(none)\"}`\n            }\n            linkDirectionalArrowLength={6}\n            linkDirectionalArrowRelPos={1}\n            linkCurvature={0.25}\n            nodeAutoColorBy=\"group\"\n            onNodeClick={(node) => navigate(`/table/${node.name}`)}\n            enableZoomPanInteraction={false} // disable scroll zoom\n\n            onLinkHover={(link) => {\n              if (link) {\n                const relation = relations.find(\n                  (r) => r.fk_table === link.target && r.pk_table === link.source\n                );\n\n                if (relation) {\n                  const pkAttr = attributes.find((a) => a.id === relation.pk_attr)?.name || \"N/A\";\n                  const fkAttr = attributes.find((a) => a.id === relation.fk_attr)?.name || \"N/A\";\n\n                  setTooltip({\n                    x: link.source.x,\n                    y: link.source.y,\n                    text: `PK: ${pkAttr} â†’ FK: ${fkAttr}`,\n                  });\n                }\n              } else {\n                setTooltip(null);\n              }\n            }}\n\n            linkColor={(link) => {\n              const src =\n                typeof link.source === \"object\" ? link.source.id : link.source;\n              const tgt =\n                typeof link.target === \"object\" ? link.target.id : link.target;\n              return tgt === tableName ? \"#16a34a\" : \"#f59e0b\"; // green incoming, orange outgoing\n            }}\n            linkWidth={2}\n\n            nodeCanvasObject={(node, ctx, globalScale) => {\n              const label = node.name;\n              const fontSize = 14 / Math.max(0.5, globalScale);\n\n              ctx.beginPath();\n              ctx.arc(\n                node.x,\n                node.y,\n                node.name === tableName ? 12 : 8,\n                0,\n                2 * Math.PI,\n                false\n              );\n              ctx.fillStyle =\n                node.name === tableName ? \"#f97316\" : node.color || \"#ccc\";\n              ctx.fill();\n              ctx.strokeStyle = \"#333\";\n              ctx.lineWidth = 2;\n              ctx.stroke();\n\n              ctx.font = `${fontSize}px Sans-Serif`;\n              ctx.textAlign = \"center\";\n              ctx.textBaseline = \"top\";\n              ctx.fillStyle = \"#111\";\n              ctx.fillText(label, node.x, node.y + 14);\n            }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":";;AAAA;AACA,SAASA,SAAS,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC5D,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,WAAW,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACxC,eAAe,SAASC,UAAUA,CAAC;EAAEC,KAAK;EAAEC,SAAS;EAAEC,IAAI;EAAEC,OAAO;EAAEC,UAAU;EAAEC,SAAS;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EAEnGjB,SAAS,CAAC,MAAM;IACfkB,KAAK,CAAC,mCAAmC,GAAGC,IAAI,CAAC,CAC9CC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAK;MACdC,QAAQ,CAACD,IAAI,CAAC;;MAEd;MACAL,KAAK,CAAC,yCAAyC,GAAGK,IAAI,CAACE,EAAE,CAAC,CACvDL,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAKG,aAAa,CAACH,IAAI,CAAC,CAAC;;MAEtC;MACAL,KAAK,CAAC,wCAAwC,GAAGK,IAAI,CAACJ,IAAI,CAAC,CACxDC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAKI,aAAa,CAACJ,IAAI,CAAC,CAAC;;MAEtC;MACAL,KAAK,CAAC,yCAAyC,CAAC,CAC7CE,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEQ,CAAC,IAAK;QACX,MAAMC,IAAI,GAAGD,CAAC,CAACE,KAAK,CAACC,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACb,IAAI,KAAKA,IAAI,CAAC;QACjD,IAAI,CAACU,IAAI,EAAE;QACX,MAAMI,SAAS,GAAG,IAAIC,GAAG,CAAC,CAACL,IAAI,CAACJ,EAAE,CAAC,CAAC;QACpCG,CAAC,CAACO,KAAK,CAACC,OAAO,CAAEC,CAAC,IAAK;UACrB,IAAIA,CAAC,CAACC,MAAM,KAAKT,IAAI,CAACJ,EAAE,EAAEQ,SAAS,CAACM,GAAG,CAACF,CAAC,CAACG,MAAM,CAAC;UACjD,IAAIH,CAAC,CAACG,MAAM,KAAKX,IAAI,CAACJ,EAAE,EAAEQ,SAAS,CAACM,GAAG,CAACF,CAAC,CAACC,MAAM,CAAC;QACnD,CAAC,CAAC;QACF,MAAMR,KAAK,GAAGF,CAAC,CAACE,KAAK,CAACW,MAAM,CAAET,CAAC,IAAKC,SAAS,CAACS,GAAG,CAACV,CAAC,CAACP,EAAE,CAAC,CAAC;QACxD,MAAMU,KAAK,GAAGP,CAAC,CAACO,KAAK,CAACM,MAAM,CACzBJ,CAAC,IAAKJ,SAAS,CAACS,GAAG,CAACL,CAAC,CAACC,MAAM,CAAC,IAAIL,SAAS,CAACS,GAAG,CAACL,CAAC,CAACG,MAAM,CAC1D,CAAC;QACDG,aAAa,CAAC;UAAEb,KAAK;UAAEK;QAAM,CAAC,CAAC;MACjC,CAAC,CAAC;IACN,CAAC,CAAC,CACDS,KAAK,CAAC,MAAM;MACXC,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAC;IAC5C,CAAC,CAAC;EACN,CAAC,EAAE,CAAC3B,IAAI,CAAC,CAAC;EAEV,MAAM4B,KAAK,GAAG7C,MAAM,CAAC,CAAC;EACtB,MAAM8C,QAAQ,GAAG3C,WAAW,CAAC,CAAC;EAC9B,MAAM,CAAC4C,OAAO,EAAEC,UAAU,CAAC,GAAG/C,QAAQ,CAAC;IAAEgD,OAAO,EAAE,KAAK;IAAEC,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAG,CAAC,CAAC;;EAEhF;EACAtD,SAAS,CAAC,MAAM;IACd,MAAMuD,UAAU,GAAIC,CAAC,IAAK;MACxBN,UAAU,CAAEO,IAAI,KAAM;QAAE,GAAGA,IAAI;QAAEL,CAAC,EAAEI,CAAC,CAACE,OAAO;QAAEL,CAAC,EAAEG,CAAC,CAACG;MAAQ,CAAC,CAAC,CAAC;IACjE,CAAC;IACDC,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAEN,UAAU,CAAC;IAChD,OAAO,MAAMK,MAAM,CAACE,mBAAmB,CAAC,WAAW,EAAEP,UAAU,CAAC;EAClE,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMQ,QAAQ,GAAG9D,OAAO,CAAC,MAAM;IAC7B,IAAI,EAACS,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEoB,KAAK,KAAI,EAACpB,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEyB,KAAK,GAAE,OAAO;MAAEL,KAAK,EAAE,EAAE;MAAEK,KAAK,EAAE;IAAG,CAAC;IAEnE,MAAM6B,IAAI,GAAGtD,KAAK,CAACoB,KAAK,CAACC,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACb,IAAI,KAAKR,SAAS,CAAC;IAC1D,IAAI,CAACqD,IAAI,EAAE,OAAO;MAAElC,KAAK,EAAE,EAAE;MAAEK,KAAK,EAAE;IAAG,CAAC;IAE1C,MAAMF,SAAS,GAAG,IAAIC,GAAG,CAAC,CAAC8B,IAAI,CAACvC,EAAE,CAAC,CAAC;IACpC,MAAMU,KAAK,GAAGzB,KAAK,CAACyB,KAAK,CAACM,MAAM,CAAEJ,CAAC,IAAK;MACtC,MAAM4B,GAAG,GAAG,OAAO5B,CAAC,CAACC,MAAM,KAAK,QAAQ,GAAGD,CAAC,CAACC,MAAM,CAACb,EAAE,GAAGY,CAAC,CAACC,MAAM;MACjE,MAAM4B,GAAG,GAAG,OAAO7B,CAAC,CAACG,MAAM,KAAK,QAAQ,GAAGH,CAAC,CAACG,MAAM,CAACf,EAAE,GAAGY,CAAC,CAACG,MAAM;MACjE,IAAIyB,GAAG,KAAKD,IAAI,CAACvC,EAAE,IAAIyC,GAAG,KAAKF,IAAI,CAACvC,EAAE,EAAE;QACtCQ,SAAS,CAACM,GAAG,CAAC0B,GAAG,CAAC;QAClBhC,SAAS,CAACM,GAAG,CAAC2B,GAAG,CAAC;QAClB,OAAO,IAAI;MACb;MACA,OAAO,KAAK;IACd,CAAC,CAAC;IAEF,MAAMpC,KAAK,GAAGpB,KAAK,CAACoB,KAAK,CAACW,MAAM,CAAET,CAAC,IAAKC,SAAS,CAACS,GAAG,CAACV,CAAC,CAACP,EAAE,CAAC,CAAC;IAC5D,OAAO;MAAEK,KAAK;MAAEK;IAAM,CAAC;EACzB,CAAC,EAAE,CAACzB,KAAK,EAAEC,SAAS,CAAC,CAAC;;EAEtB;EACAX,SAAS,CAAC,MAAM;IACd,IAAI+C,KAAK,CAACoB,OAAO,EAAE;MACjB,MAAMC,EAAE,GAAGrB,KAAK,CAACoB,OAAO;MACxBC,EAAE,CAACC,OAAO,CAAC,QAAQ,CAAC,CAACC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;MACrCF,EAAE,CAACC,OAAO,CAAC,MAAM,CAAC,CAACE,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACpC;EACF,CAAC,EAAE,CAACR,QAAQ,CAAC,CAAC;;EAEd;EACA,MAAMS,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAIzB,KAAK,CAACoB,OAAO,EAAE;MACjB,MAAMM,IAAI,GAAG1B,KAAK,CAACoB,OAAO,CAACM,IAAI,CAAC,CAAC;MACjC1B,KAAK,CAACoB,OAAO,CAACM,IAAI,CAACA,IAAI,GAAG,GAAG,EAAE,GAAG,CAAC;IACrC;EACF,CAAC;EACD,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI3B,KAAK,CAACoB,OAAO,EAAE;MACjB,MAAMM,IAAI,GAAG1B,KAAK,CAACoB,OAAO,CAACM,IAAI,CAAC,CAAC;MACjC1B,KAAK,CAACoB,OAAO,CAACM,IAAI,CAACA,IAAI,GAAG,GAAG,EAAE,GAAG,CAAC;IACrC;EACF,CAAC;EACD,MAAME,eAAe,GAAGA,CAAA,KAAM;IAC5B,IAAI5B,KAAK,CAACoB,OAAO,EAAE;MACjBpB,KAAK,CAACoB,OAAO,CAACS,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC;IACnC;EACF,CAAC;EAED,oBACEpE,OAAA;IAAKqE,SAAS,EAAC,mDAAmD;IAAAC,QAAA,gBAChEtE,OAAA;MAAKqE,SAAS,EAAC,gDAAgD;MAAAC,QAAA,gBAC7DtE,OAAA;QAAIqE,SAAS,EAAC,qBAAqB;QAAAC,QAAA,EAAC;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnD1E,OAAA;QAAO2E,OAAO,EAAC,WAAW;QAACN,SAAS,EAAC,kCAAkC;QAAAC,QAAA,gBACrEtE,OAAA;UACE4E,IAAI,EAAC,UAAU;UACf3D,EAAE,EAAC,WAAW;UACdoD,SAAS,EAAC,cAAc;UACxBQ,QAAQ,EAAEA,CAAA,KAAMxE,OAAO,CAAE4C,IAAI,IAAK,CAACA,IAAI,CAAE;UACzC6B,OAAO,EAAE1E;QAAK;UAAAmE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CAAC,eACF1E,OAAA;UAAMqE,SAAS,EAAC;QAAkF;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACrG1E,OAAA;UAAMqE,SAAS,EAAC;QAA0F;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,EAELtE,IAAI,iBACHJ,OAAA;MAAKqE,SAAS,EAAC,wBAAwB;MAAAC,QAAA,gBAErCtE,OAAA;QAAKqE,SAAS,EAAC,iDAAiD;QAAAC,QAAA,gBAC9DtE,OAAA;UACE+E,OAAO,EAAEf,YAAa;UACtBK,SAAS,EAAC,iDAAiD;UAAAC,QAAA,EAC5D;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT1E,OAAA;UACE+E,OAAO,EAAEb,aAAc;UACvBG,SAAS,EAAC,iDAAiD;UAAAC,QAAA,EAC5D;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT1E,OAAA;UACE+E,OAAO,EAAEZ,eAAgB;UACzBE,SAAS,EAAC,yDAAyD;UAAAC,QAAA,EACpE;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EAGLjC,OAAO,CAACE,OAAO,iBACd3C,OAAA;QACEqE,SAAS,EAAC,yHAAyH;QACnIW,KAAK,EAAE;UAAEC,IAAI,EAAExC,OAAO,CAACG,CAAC,GAAG,EAAE;UAAEsC,GAAG,EAAEzC,OAAO,CAACI,CAAC,GAAG;QAAG,CAAE;QAAAyB,QAAA,EAEpD7B,OAAO,CAACK;MAAI;QAAAyB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CACN,eAED1E,OAAA,CAACJ,YAAY;QACXuF,GAAG,EAAE5C,KAAM;QACX6C,SAAS,EAAE7B,QAAS;QACpB8B,MAAM,EAAC,IAAI;QACXC,SAAS,EAAG9D,CAAC;UAAA,IAAA+D,YAAA;UAAA,OACX,GAAG/D,CAAC,CAACb,IAAI,UAAU,EAAA4E,YAAA,GAAA/D,CAAC,CAACgE,SAAS,cAAAD,YAAA,uBAAXA,YAAA,CAAaE,IAAI,CAAC,IAAI,CAAC,KAAI,QAAQ,EAAE;QAAA,CACzD;QACDC,0BAA0B,EAAE,CAAE;QAC9BC,0BAA0B,EAAE,CAAE;QAC9BC,aAAa,EAAE,IAAK;QACpBC,eAAe,EAAC,OAAO;QACvBC,WAAW,EAAGzE,IAAI,IAAKmB,QAAQ,CAAC,UAAUnB,IAAI,CAACV,IAAI,EAAE,CAAE;QACvDoF,wBAAwB,EAAE,KAAM,CAAC;QAAA;;QAEjCC,WAAW,EAAGC,IAAI,IAAK;UACrB,IAAIA,IAAI,EAAE;YACR,MAAMC,QAAQ,GAAG3F,SAAS,CAACgB,IAAI,CAC5B4E,CAAC,IAAKA,CAAC,CAACC,QAAQ,KAAKH,IAAI,CAACjE,MAAM,IAAImE,CAAC,CAACE,QAAQ,KAAKJ,IAAI,CAACnE,MAC3D,CAAC;YAED,IAAIoE,QAAQ,EAAE;cAAA,IAAAI,gBAAA,EAAAC,iBAAA;cACZ,MAAMC,MAAM,GAAG,EAAAF,gBAAA,GAAAhG,UAAU,CAACiB,IAAI,CAAEkF,CAAC,IAAKA,CAAC,CAACxF,EAAE,KAAKiF,QAAQ,CAACQ,OAAO,CAAC,cAAAJ,gBAAA,uBAAjDA,gBAAA,CAAmD3F,IAAI,KAAI,KAAK;cAC/E,MAAMgG,MAAM,GAAG,EAAAJ,iBAAA,GAAAjG,UAAU,CAACiB,IAAI,CAAEkF,CAAC,IAAKA,CAAC,CAACxF,EAAE,KAAKiF,QAAQ,CAACU,OAAO,CAAC,cAAAL,iBAAA,uBAAjDA,iBAAA,CAAmD5F,IAAI,KAAI,KAAK;cAE/E+B,UAAU,CAAC;gBACTE,CAAC,EAAEqD,IAAI,CAACnE,MAAM,CAACc,CAAC;gBAChBC,CAAC,EAAEoD,IAAI,CAACnE,MAAM,CAACe,CAAC;gBAChBC,IAAI,EAAE,OAAO0D,MAAM,UAAUG,MAAM;cACrC,CAAC,CAAC;YACJ;UACF,CAAC,MAAM;YACLjE,UAAU,CAAC,IAAI,CAAC;UAClB;QACF,CAAE;QAEFmE,SAAS,EAAGZ,IAAI,IAAK;UACnB,MAAMxC,GAAG,GACP,OAAOwC,IAAI,CAACnE,MAAM,KAAK,QAAQ,GAAGmE,IAAI,CAACnE,MAAM,CAACb,EAAE,GAAGgF,IAAI,CAACnE,MAAM;UAChE,MAAM4B,GAAG,GACP,OAAOuC,IAAI,CAACjE,MAAM,KAAK,QAAQ,GAAGiE,IAAI,CAACjE,MAAM,CAACf,EAAE,GAAGgF,IAAI,CAACjE,MAAM;UAChE,OAAO0B,GAAG,KAAKvD,SAAS,GAAG,SAAS,GAAG,SAAS,CAAC,CAAC;QACpD,CAAE;QACF2G,SAAS,EAAE,CAAE;QAEbC,gBAAgB,EAAEA,CAAC1F,IAAI,EAAE2F,GAAG,EAAEC,WAAW,KAAK;UAC5C,MAAMC,KAAK,GAAG7F,IAAI,CAACV,IAAI;UACvB,MAAMwG,QAAQ,GAAG,EAAE,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAG,EAAEJ,WAAW,CAAC;UAEhDD,GAAG,CAACM,SAAS,CAAC,CAAC;UACfN,GAAG,CAACO,GAAG,CACLlG,IAAI,CAACuB,CAAC,EACNvB,IAAI,CAACwB,CAAC,EACNxB,IAAI,CAACV,IAAI,KAAKR,SAAS,GAAG,EAAE,GAAG,CAAC,EAChC,CAAC,EACD,CAAC,GAAGiH,IAAI,CAACI,EAAE,EACX,KACF,CAAC;UACDR,GAAG,CAACS,SAAS,GACXpG,IAAI,CAACV,IAAI,KAAKR,SAAS,GAAG,SAAS,GAAGkB,IAAI,CAACqG,KAAK,IAAI,MAAM;UAC5DV,GAAG,CAACW,IAAI,CAAC,CAAC;UACVX,GAAG,CAACY,WAAW,GAAG,MAAM;UACxBZ,GAAG,CAACa,SAAS,GAAG,CAAC;UACjBb,GAAG,CAACc,MAAM,CAAC,CAAC;UAEZd,GAAG,CAACe,IAAI,GAAG,GAAGZ,QAAQ,eAAe;UACrCH,GAAG,CAACgB,SAAS,GAAG,QAAQ;UACxBhB,GAAG,CAACiB,YAAY,GAAG,KAAK;UACxBjB,GAAG,CAACS,SAAS,GAAG,MAAM;UACtBT,GAAG,CAACkB,QAAQ,CAAChB,KAAK,EAAE7F,IAAI,CAACuB,CAAC,EAAEvB,IAAI,CAACwB,CAAC,GAAG,EAAE,CAAC;QAC1C;MAAE;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACjE,EAAA,CAvOuBR,UAAU;EAAA,QA0CfJ,WAAW;AAAA;AAAAsI,EAAA,GA1CNlI,UAAU;AAAA,IAAAkI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}